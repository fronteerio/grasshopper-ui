<VirtualHost <%= apacheConf.timetable.ip %>:80>
    ServerAdmin admin@grasshopper.com
    DocumentRoot <%= apacheConf.timetable.documentRoot %>
    ErrorLog <%= apacheConf.timetable.errorLog %>
    CustomLog <%= apacheConf.timetable.customLog %> common

    #Â Proxy api calls to the application server
    ProxyPass /api http://localhost:2001/api retry=5
    ProxyPassReverse /api http://localhost:2001/api
    ProxyPreserveHost On

    # Shared files
    Alias /shared <%= apacheConf.timetable.shared %>

    # QUnit tests
    Alias /qunit <%= apacheConf.timetable.tests %>/qunit
    <Directory <%= apacheConf.timetable.tests %>/qunit>
        Options Indexes FollowSymLinks
        Order Allow,Deny
        Allow from All

        RewriteEngine On
        RewriteBase /qunit
        RewriteRule ^api\.(.*)$ <%= apacheConf.timetable.tests %>/qunit/tests/api.$1.html
    </Directory>

    <Directory />
        Order Allow,Deny
        Allow from All
    </Directory>

    ErrorDocument 401 /shared/gh/errors/401.html
    ErrorDocument 404 /shared/gh/errors/404.html
    ErrorDocument 503 /shared/gh/errors/503.html

</VirtualHost>
